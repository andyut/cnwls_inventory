<odoo>
  <data>
    <!-- explicit list view definition -->
 
    <record model="ir.ui.view" id="cnw_jp_tree">
      <field name="name">cnw.jp.tree</field>
      <field name="model">cnw.jp</field>
      <field name="arch" type="xml">
        <tree string="Jurnal Entry"
                decoration-success="status=='sap'"
                decoration-info="status=='posted'"
        >
          <field name="company_id"/>
          <field name="name"/>
          <field name="refdate"/> 
          <field name="remarks2"/>
          <field name="U_TransType"/>
          <field name="u_trans_no"/>
          <field name="status"/>
          <field name="bpartner_name"/>
          
          <field name="debettotal" sum="totaldebit"/>
          <field name="credittotal" sum="totalcredit" />
          <field name="creator"/>
          <field name="approval"/>
        </tree>
      </field>
    </record>
    <record model="ir.ui.view" id="cnw_jp_form">
      <field name="name">cnw.jp_form</field>
      <field name="model">cnw.jp</field>
      <field name="arch" type="xml">
        <form>
        <header>
        
          <button name="print_kasbon" string="Print Kasbon" widget="binary_preview" type="object" class="btn-primary"
            attrs="{'invisible': ['|', ('status', '=', 'draft'), ('status', '=', 'pending'),]}"/>
          <button name="approve" string="Approve" widget="binary_preview" type="object" class="btn-primary" attrs="{'invisible': ['|',('status', '=', 'posted'),('status','=','sap')]}"/>
          <button name="post_to_sap" string="Posting To SAP"  type="object" class="btn-primary" attrs="{'invisible': ['|',('status', '=', 'draft'),('status','=','sap')]}"/>
          <button name="edit_to_sap" string="Edit To SAP"  type="object" class="btn-primary" attrs="{'invisible': ['|',('status', '=', 'draft'),('status','=','posted')]}"/>
          <button name="delete_to_sap" string="Delete from SAP"  type="object" class="btn-primary"  attrs="{'invisible': ['|',('status', '=', 'draft'),('status','=','posted')]}"/>
          <field name="status" widget="statusbar" statusbar_visible="draft,posted,sap" />
        </header>
        <sheet>
               <div class="oe_title">
                    <h1>
                        <field name="name" readonly="1"/>
                    </h1>
                    <h2>
                        <field name="company_id" readonly="1"/>
                    </h2>
                </div>          
          
            <group string="General Info">
              <group>
                <field name="refdate"/>
                <field name="U_TransType" />
                <field name="isremarkprint"/> 
                <field name="issappartner"/> 
                <field name="partner" attrs="{'invisible': [('issappartner','=',True)] }"/> 
                <field name="bpartner_id" attrs="{'invisible': [('issappartner','=',False)] }" options="{'no_create': True, 'no_create_edit':True}" /> 
                <field name="bpartner_code" invisible="1" /> 
                <field name="bpartner_name"  invisible="1" /> 
                <field name="bpartner_sales"  invisible="1" /> 
                <field name="tunaino"/>
                <field name="invoiceref"/>
                <field name="remarks2"/>
                <field name="remarks3"/>
                <field name="remarks4"/>
              </group>
              <group>
                <field name="remarks1" nolabel="1"/>
              </group>
            </group>
            <group string="SAP">
                  <group>
                    <field name="transid" readonly="1"/> 
                    <field name="numb" readonly="1"/> 
                    <field name="u_trans_no" />
                    <field name="amount" />
                    <field name="terbilang" />
                  </group>
                  <group>
                    <field name="debettotal"/>
                    <field name="credittotal"/> 
                    <field name="balance"/>
                  </group>
            </group>
        
        <notebook>
          <page string="Jurnal Entry">
            <field name="jpline_ids" > 
              <tree editable="bottom" >
                <field name="account" options="{'no_create': True, 'no_create_edit':True}" />
                <field name="acctcode" invisible="1"/>
                <field name="remarks" />
                <field name="print_astotal" />
                <field name="print_indetail" />
                <field name="debit" sum="total_debit" />
                <field name="credit" sum="total_credit" />
                <field name="depart_id" options="{'no_create': True, 'no_create_edit':True}" />
                <field name="orccode2"  invisible="1"/>
                <field name="divisi_id" options="{'no_create': True, 'no_create_edit':True}" />
                <field name="profitcode"  invisible="1"/>
                <field name="biaya_id" options="{'no_create': True, 'no_create_edit':True}" />
                <field name="biaya"  invisible="1"/>
                <field name="amount"  invisible="1"/> 

              </tree>
            </field>
          </page>
          <page string="Json Sending">
            <field name="json_param" />
          </page>
          <page string="Json Result">
            <field name="json_result" />
          </page>
           
        </notebook>
      </sheet>
        </form>
      </field>
    </record>
    
     <record model="ir.ui.view" id="cnw_jp_search">
      <field name="name">cnw.jp.search</field>
      <field name="model">cnw.jp</field>
      <field name="arch" type="xml">
        <search string="JE Search">
          <filter string="Approved" domain="[('status','=', 'post')]" name="je_approved" /> 
          <filter string="Waiting Approved" domain="[('status','=', 'pending')]" name="je_waiting" /> 
          <field name="name" />
          <field name="u_trans_no" />
          <field name="remarks2" />
          <field name="bpartner_name" />
          <field name="U_TransType" />
          <field name="refdate"/> 
 
          <filter string="refdate" name="group_refdate" domain="[]" context="{'group_by':'refdate'}"/> 
          <filter string="U_TransType" name="group_transtype" domain="[]" context="{'group_by':'U_TransType'}"/> 
        </search>
      </field>
    </record>       
    <!-- actions opening views on models -->

<record model="ir.actions.act_window" id="cnw_jp_action">
  <field name="name">Jurnal Entry</field>
  <field name="res_model">cnw.jp</field>
  <field name="view_mode">tree,form</field>
</record>

  </data>
</odoo>
